import{r as n,j as e,p as v,u as j,c as w,b as P,x as C,y as T,B as y}from"./index-2rYyGtHh.js";import{h as S,i as k,f as I}from"./Icon-B5k9VC6B.js";import{I as D}from"./ImageCustom-Do7A50Cx.js";import{c as E}from"./classNames-BuontFX9.js";const B=({cartItem:t,quantityItem:o,handleUpdateCart:u,handleRemoveFromCart:x,index:g,id:r})=>{var i,f;const[a,d]=n.useState(o),[p,m]=n.useState(t),h=()=>{console.log(r),r&&x(r)},s=()=>{const l=a+1;d(l),u(t,l)},c=()=>{a===1&&r&&x(r);const l=a-1;d(l),u(t,l)};return n.useEffect(()=>{t&&(async N=>{await v.getProductItemById(N).then(b=>{m(b.data)})})(t.id)},[]),n.useEffect(()=>{d(o)},[o]),e.jsx("div",{className:"flex justify-center items-center",children:e.jsxs("div",{className:"grid grid-cols-12 items-center gap-x-4 p-3 w-full",children:[e.jsx("div",{className:"w-20 h-20 col-span-2",children:e.jsx(D,{src:"https://readymadeui.com/images/product1.webp",alt:"Thanh Trong",rounded:!0})}),e.jsx("div",{className:"col-span-5",children:e.jsx("span",{className:"mx-2",children:(i=t.product)==null?void 0:i.productName})}),e.jsxs("div",{className:"flex gap-2 col-span-2",children:[e.jsx("div",{onClick:c,children:e.jsx(S,{})}),e.jsx("span",{className:"h-7 w-8 bg-gray-200 text-center items-center",children:a}),e.jsx("button",{onClick:s,className:E("",a===p.stock?"text-gray-400 cursor-default":"cursor-pointer hover:text-green-500"),disabled:a===p.stock,children:e.jsx(k,{})})]}),e.jsx("div",{className:"col-span-2",children:e.jsx("span",{children:((((f=t.product)==null?void 0:f.promoPrice)??0)*a).toLocaleString("it-IT",{style:"currency",currency:"VND"})})}),e.jsx("div",{onClick:h,className:"col-span-1 flex justify-end",children:e.jsx(I,{})})]})})},R=()=>{j(s=>s.user);const t=j(s=>s.cart.items),o=w(),u=P(),[x,g]=n.useState(0),[r,a]=n.useState(0),d=(s,c)=>{o(C({productId:s.id,quantity:c}))},p=s=>{console.log("id:",s),o(T(s)),y.success("Product removed from cart.",{autoClose:1e3,pauseOnHover:!0,draggable:!0,delay:50})},m=()=>{let s=0;t.forEach(c=>{var i;s+=(((i=c.productItem.product)==null?void 0:i.promoPrice)??0)*c.quantity}),g(s),a(s)},h=()=>{if(t.length===0){y.error("No product to checkout.",{autoClose:1e3,pauseOnHover:!0,draggable:!0,delay:50});return}u("/order")};return n.useEffect(()=>{m()},[t]),e.jsx("div",{className:"font-Roboto bg-gray-100 h-screen text-center",children:e.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[e.jsx("h2",{className:"text-3xl font-extrabold text-[#333]",children:"Giỏ hàng"}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 mt-10",children:[e.jsx("div",{className:"flex flex-col",children:t.length>0?t.map((s,c)=>e.jsx(B,{cartItem:s.productItem,quantityItem:s.quantity,handleUpdateCart:d,handleRemoveFromCart:p,index:c,id:s.productItem.id},c)):e.jsx("span",{className:"text-xl font-semibold",children:"Giỏ hàng của bạn đang trống."})}),e.jsxs("div",{className:"bg-white h-max rounded-md p-6 shadow-[0_0px_4px_0px_rgba(6,81,237,0.2)]",children:[e.jsx("h3",{className:"text-xl font-extrabold [#333] border-b pb-3",children:"Tóm tắt đơn hàng"}),e.jsxs("ul",{className:"text-[#333] text-sm divide-y mt-6",children:[e.jsxs("li",{className:"flex flex-wrap gap-4 py-3",children:[e.jsx("span",{children:"Tổng cộng"}),e.jsx("span",{className:"ml-auto font-bold",children:x.toLocaleString("it-IT",{style:"currency",currency:"VND"})})]}),e.jsxs("li",{className:"flex flex-wrap gap-4 py-3",children:[e.jsx("span",{children:"Phí vận chuyển"}),e.jsx("span",{className:"ml-auto font-bold",children:"Miễn phí"})]}),e.jsxs("li",{className:"flex flex-wrap gap-4 py-3 font-bold",children:[e.jsx("span",{children:"Tổng"}),e.jsx("span",{className:"ml-auto",children:r.toLocaleString("it-IT",{style:"currency",currency:"VND"})})]})]}),e.jsx("button",{type:"button",className:`mt-6 text-sm px-6 py-2.5 w-full bg-[#333] text-white rounded-md ${t.length===0?"bg-gray-400":"hover:bg-[#111]"}`,onClick:h,children:"Thanh toán"})]})]})]})})};export{R as default};
