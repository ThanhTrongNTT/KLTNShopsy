import{j as e,L as k,w as S,r as i,u as C,b as P}from"./index-faZZUzqZ.js";import{c as x}from"./classNames-BuontFX9.js";import{u as w,a as D}from"./index.esm-BR3bq5-L.js";import{I as E}from"./ImageCustom-BVVQQthV.js";import{e as B,f as I,g as L}from"./Icon-CuYUDJ1z.js";import{L as M}from"./Label-BX4xUnNj.js";import R from"./OrderHistory-DuLjwMxa.js";import"./ToggleSwitch-BwM4R0GH.js";import"./index-CuQanIW8.js";const A=({className:t=""})=>e.jsx(k,{to:"/",children:e.jsxs("div",{className:x("header-left flex cursor-pointer select-none items-center gap-[10px]",t),children:[e.jsx("img",{src:"/src/assets/logo.png",alt:"",className:"h-10 w-10"}),e.jsx("div",{className:"text-sm font-bold text-c2 lg:text-xl text-black",children:"Sport Store"})]})}),F=()=>{var g;const{userInfo:t}=S(s=>s.user),{handleSubmit:r,setValue:n,register:l,formState:{isSubmitting:o}}=w({mode:"onChange"}),[d,a]=i.useState(!0),[m,b]=i.useState(),y=()=>{var s;(s=document.getElementById("inp-upload"))==null||s.click()},v=async s=>{const p=s.target.files[0],u=await h(p);b(u)},h=s=>new Promise((p,u)=>{const c=new FileReader;c.readAsDataURL(s),c.onload=()=>{p(c.result)},c.onerror=j=>{u(j)}}),f=async({avatar:s})=>{a(!0),window.location.reload()};return i.useEffect(()=>{var s;b((s=t==null?void 0:t.userProfile)==null?void 0:s.avatar.url)},[(g=t==null?void 0:t.userProfile)==null?void 0:g.avatar.url]),e.jsx("div",{className:"dark:bg-grayScale-c2 mx-auto mt-5 h-full max-h-[560px] w-full max-w-[350px] rounded-xl bg-white px-7 py-8 lg:mx-0",children:e.jsx("div",{className:"text-center font-DMSans",children:e.jsxs("form",{onSubmit:r(f),children:[e.jsxs("div",{className:"relative inline-block rounded-full",children:[e.jsx(E,{src:m?m.toString():"https://images.unsplash.com/photo-1657662075863-3a5093fcb3f1?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=387&q=80",alt:"avt",className:"object-cover mb-4 h-[170px] w-[170px] select-none rounded-full"}),e.jsxs("button",{type:"button",className:`absolute bottom-0 right-0 flex 
                              -translate-y-1/3 -translate-x-1/3 cursor-pointer items-center justify-center 
                              rounded-full border-2 p-3 transition-all 
                              bg-white text-gray-700 border-gray-300 hover:bg-gray-200 hover:text-black 
                              dark:bg-gray-800 dark:text-gray-300 dark:border-gray-700 dark:hover:bg-gray-700 dark:hover:text-white`,onClick:y,children:[e.jsx("span",{children:e.jsx(B,{})}),e.jsx("input",{type:"text",className:"hidden",...l("avatar")}),e.jsx("input",{id:"inp-upload",type:"file",className:"hidden",onChange:s=>{v(s),a(!1)}})]})]}),e.jsx("p",{className:"dark:text-grayScale-c6 mb-5 font-Roboto text-4xl"}),e.jsxs("div",{className:"flex justify-between mb-4 font-Roboto text-sm font-medium",children:[e.jsx("span",{className:"text-grayScale-c3 dark:text-grayScale-c7",children:"Thành viên kể từ"}),e.jsx("span",{className:" text-grayScale-c4",children:t.modifiedDate})]}),e.jsx("button",{disabled:d,type:"submit",className:x("text-white font-semibold bg-purple-400 w-full py-2 rounded-full transition-all",d?"bg-opacity-30 cursor-no-drop select-none hover:none":"hover:bg-purple-500"),onClick:()=>{n("avatar",m)},children:o?e.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-[3px]  border-t-2 border-white border-t-transparent bg-transparent"}):e.jsx("span",{children:"Cập nhật ảnh đại diện"})})]})})})},H=({control:t,name:r,placeholder:n,id:l,tabIndex:o,hasDisable:d,type:a})=>{const{field:m}=D({control:t,name:r,defaultValue:""});return e.jsx("div",{className:x("flex justify-center items-center gap-4 py-3"),children:e.jsx("input",{type:a||"text",className:"w-full bg-slate-200 rounded-lg text-c3 border-none",...m,placeholder:n,name:r,id:l,tabIndex:o,disabled:d})})},N=({children:t,hasDisable:r,color:n,...l})=>e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(M,{htmlFor:l.id,className:x("font-DMSans leading-none",r&&"pointer-events-none select-none bg-gray-100",n),children:t}),e.jsx(H,{hasDisable:r,...l})]}),V=({onClick:t,disable:r})=>e.jsxs("button",{type:"button",onClick:t,className:x("font-semibold text-orange-400 mr-4 px-6 py-2 rounded-md  flex items-center justify-center gap-2 transition-all",r?"bg-gray-100 !text-gray-c6 border !border-transparent cursor-no-drop pointer-events-none select-none":"hover:text-white hover:bg-gradient-to-br hover:from-orange-500  border border-orange-300 hover:to-pink-500"),children:[e.jsx("span",{className:"leading-none",children:e.jsx(I,{})}),"Hủy bỏ"]}),T=({children:t,disable:r})=>e.jsx("button",{type:"submit",className:x("text-white px-5 py-2 bg-gradient-to-brtext-lg font-semibold rounded-md hover:bg-gradient-to-br",r?"bg-gray-100 !text-gray-c6 border !border-transparent cursor-no-drop pointer-events-none select-none":"bg-gradient-to-br from-orange-500 to-pink-500 hover:from-orange-600 hover:to-pink-600"),children:t}),K=()=>{var u,c;const[t,r]=i.useState(!0),[n,l]=i.useState(!0),[o,d]=i.useState(!1),{userInfo:a}=C(j=>j.user),{handleSubmit:m,control:b,setValue:y,setFocus:v}=w({mode:"onChange",defaultValues:{userName:a.userName,email:a.email,name:(u=a.userProfile)==null?void 0:u.name,userProfile:a.userProfile}});window.location.pathname.split("/")[2];const[h,f]=i.useState(!0),g=P(),s=()=>{d(!o),l(!n),r(!1)},p=()=>{d(!o),l(!n),r(!0)};return i.useEffect(()=>{a.id===""?g("/login"):f(!1)},[a]),h?null:e.jsxs("div",{className:"max-w-7xl flex flex-col gap-[30px] lg:flex-row lg:gap-[33px] mx-auto py-10 px-5 h-screen dark:bg-gray-900",children:[e.jsx(F,{}),e.jsxs("div",{className:"flex-1 px-5 lg:px-0",children:[e.jsx("div",{className:"flex justify-between ",children:e.jsx("div",{className:"border-gray-c3 my-5 hidden border-b pb-8 lg:block text-3xl font-semibold",children:e.jsx(A,{})})}),e.jsxs("div",{className:"font-DMSans",children:[e.jsxs("div",{className:"mb-2 flex justify-between",children:[e.jsxs("p",{className:"text-grayScale-c2 text-xl font-medium dark:text-white lg:text-2xl",children:["Xin chào, ",(c=a==null?void 0:a.userProfile)==null?void 0:c.name]}),e.jsx("button",{disabled:o,type:"button",className:x("text-semibold px-3 py-1 rounded-full border hover:bg-slate-100 hover:text-black transition-all border-gray-c4",o?"bg-gray-c4":"bg-transparent"),onClick:s,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{children:e.jsx(L,{})}),e.jsx("span",{children:"Chỉnh sửa thông tin"})]})})]}),e.jsxs("form",{onChange:()=>l(!1),className:"mt-3",children:[e.jsx("div",{className:"",children:e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsx(N,{name:"name",id:"name",placeholder:"Enter your name",control:b,hasDisable:t,color:"dark:text-white",children:"Tên người dùng"}),e.jsx(N,{name:"email",id:"email",placeholder:"Enter your email",control:b,tabIndex:-1,hasDisable:t,color:"dark:text-white",children:"Email"})]})}),e.jsx("div",{className:"mt-8 inline-block w-full text-right",children:e.jsx("div",{className:"inline-block",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(V,{onClick:p,disable:n}),e.jsx(T,{disable:n,children:"Cập nhật"})]})})})]}),e.jsx(R,{})]})]})]})};export{K as default};
