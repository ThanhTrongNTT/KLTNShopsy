import{c as v,b as N,r as k,B as o,j as e,L as d,d as u,g as L}from"./index-DuRh9XQ0.js";import{L as T}from"./logo-BQJkpfV5.js";import{c as S,o as E}from"./index.esm-lX3DCZ1w.js";import{u as A}from"./index.esm-Nr3o4qtT.js";import{u as P,T as _}from"./TogglePassword-DKKw286_.js";import{I as g}from"./Input-u5HjlfMV.js";import{A as U}from"./authentication.api-BjWjU_13.js";import{E as G,P as H}from"./schema-jLxdUDEa.js";import{j as O,u as C}from"./user.api-CLQCVwmf.js";import{b as I}from"./Icon-C49vfcQg.js";import"./classNames-BuontFX9.js";const R="/KLTNShopsy/assets/google-logo-BM7JBFoG.png",h="http://localhost:8080",p="http://localhost:3080/",B=h+"/oauth2/authorization/google?redirect_uri="+p,F=h+"/oauth2/authorization/github?redirect_uri="+p,D=S({email:G,password:H}),Z=()=>{var c,m;const x=v(),{value:i,handleToggleValue:f}=P(),l=N(),b=async t=>{await U.login(t.email,t.password).then(async s=>{u.set("accessToken",s.data.accessToken),u.set("refreshToken",s.data.refreshToken);const w=O(s.data.accessToken||"");C.getMe(w.sub).then(r=>{const j=r.data;x(L(j))}).catch(r=>{o.error(r.message,{autoClose:500,delay:10,draggable:!0,pauseOnHover:!1,position:"bottom-right"})}),o.success("Login Success!",{autoClose:500,delay:10,draggable:!0,pauseOnHover:!0}),l("/")}).catch(s=>{s.status===404&&o.error("User does not existed!",{autoClose:500,delay:10,draggable:!0,pauseOnHover:!1})})},{handleSubmit:y,control:n,formState:{errors:a}}=A({resolver:E(D),mode:"onSubmit"});return k.useEffect(()=>{const t=Object.values(a);if(t.length>0&&t[0].message){const s=t[0].message;o.error(s.toString(),{autoClose:1e3,pauseOnHover:!1,draggable:!0,delay:50})}},[a]),e.jsx("div",{className:"flex flex-col items-center justify-center px-6 py-8 mx-auto md:h-screen lg:py-0 bg-gray-200 bg-banner-login bg-cover shadow-2xl",children:e.jsxs("div",{className:"w-full bg-white rounded-lg shadow md:mt-0 sm:max-w-md xl:p-0 border-gray-700",children:[e.jsx("div",{className:"text-black flex justify-center font-bold text-2xl pt-5 cursor-pointer",onClick:()=>l("/"),children:e.jsx("img",{className:"h-20 w-auto cursor-pointer",src:T,alt:""})}),e.jsxs("div",{className:"p-6 space-y-4 md:space-y-6 sm:p-8",children:[e.jsx("h1",{className:"text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white",children:"Log in to your account"}),e.jsxs("form",{className:"space-y-4 md:space-y-6",onSubmit:y(b),children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Your email"}),e.jsx(g,{variant:"outlined",control:n,name:"email",type:"email",placeholder:"Email",error:((c=a.email)==null?void 0:c.message)??""})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Password"}),e.jsx(g,{variant:"outlined",control:n,name:"password",type:i?"text":"password",placeholder:"Password",error:((m=a.password)==null?void 0:m.message)??"",children:e.jsx(_,{open:i,onClick:f})})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(d,{to:"/forgot-password",className:"text-sm font-medium text-black hover:underline",children:"Forgot password?"})}),e.jsx("button",{type:"submit",className:"border-2 bg-cyan-300 border-white w-full text-white bg-primary-600 hover:bg-cyan-100 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center bg-primary-600 hover:bg-primary-700 focus:ring-primary-800 hover:text-black hover:duration-500",children:"Sign in"}),e.jsxs("p",{className:"text-sm font-light text-gray-400",children:["Donâ€™t have an account yet?"," ",e.jsx(d,{to:"/sign-up",className:"font-medium text-primary-600 hover:underline text-primary-500",children:"Sign up"})]})]}),e.jsxs("div",{className:"flex flex-col mt-8 gap-y-4",children:[e.jsxs("a",{className:"hover:scale-110 ease-in-out duration-300 transition flex items-center justify-center gap-2 border border-gray-200 w-full py-3 mb-4 text-gray-800 font-bold text-sm uppercase bg-white rounded-lg shadow-md",href:B,children:[e.jsx("img",{src:R,className:"h-6 w-6",alt:"Google"})," ","Log in with Google"]}),e.jsxs("a",{className:"hover:scale-110 ease-in-out flex items-center justify-center w-full py-3 mb-4 text-white font-bold text-sm uppercase bg-gray-800 rounded-lg shadow-md transition duration-300",href:F,children:[e.jsx(I,{})," Log in with Github"]})]})]})]})})};export{Z as default};
